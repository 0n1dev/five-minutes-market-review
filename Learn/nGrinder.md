
# 부하 테스트

## 부하 테스트의 목적

> 서비스 개발 이후 운영을 하기 직전 수행하는 테스트 중 하나로서, 실제 요구되는 부하를 서비스가 수용할 수 있는지를 확인하기 위한 작업

- 현재 서비스 구성의 `limit`를 찾기 위함
- 원하는 부하를 수용할 수 있게끔 구성되었는지 확인하기 위함
- 병목 지점을 찾고 병목 현상을 제거하기 위함

## 부하 테스트 단계

- 비결합된 개별 컴포넌트에 대한 부하 테스트 : 각 컴포넌트 별 병목 현상을 빠르게 발견하고 수정 가능
- 내부 서비스에 대한 부하 테스트 : 로그 기록 서비스와 같이 높은 처리량이 요구되는 서비스나, 결제 서비스와 같이 전체 서비스 품질에 있어 중요한 내부 서비스를 대상으로 테스트 진행
- 외부 서비스에 대한 부하 테스트 : Facebook, Twitter 등의 소셜 서비스나 Google 등의 플랫폼에 대한 서비스들, 또는 푸시 알림 서비스 등의 외부 서비스를 대상으로 테스트 진행
- 전체 스택에 대해 부하 테스트 : 개별 컴포넌트들에 대한 테스트를 완료한 뒤, 컴포넌트간의 상호작용을 알기 위해 처음부터 끝까지 전체 스택에 대해서 테스트 진행

## 다양한 부하 테스트 도구 및 서비스

- ApacheBench
- Siege
- JMeter
- The Grinder
- Gatling
- Tsung
- Bees
- Vegeta
- RedLine13
- Loader.io
- Goad

[부하테스트 도구 설명](https://ko.myservername.com/15-best-performance-testing-tools-2021)

# nGrinder

네이버에서 개발된 오픈소스 프로젝트로 서버 부하 테스트를 통해 성능을 측정할 수 있다.

## nGrinder의 장점

- 설치만 하면 사용하기 쉬움
- 예약, 모니터링, ramp up, 스크립트 기능 지원
- docker에서 사용 가능

-> Thread 기반으로 구현되어 있어 성능과 동시성에 대해 제한이 있다고 함

## nGrinder의 구성 요소

- nGrinder 서버
    - 에이전트와 타겟 등을 관리하고 스크립트를 작성할 수 있는 기능을 제공하는 웹 서버
- nGrinder 에이전트
    - 타겟에 부하를 요청하는 에이전트
- 타겟
    - 테스트 타겟

## nGrinder 아키텍처

![nGrinder 아키텍처](./img/nGrinder.png)